<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WrapTrack - Inventory</title>
  <style>
    body {
      font-family: 'Roboto', Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1592822692822-4101e6d3d4b4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
      background-size: cover;
      background-attachment: fixed;
      color: #fff;
      min-height: 100vh;
    }
    h1, h3 {
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
      color: #e60000;
      margin-bottom: 15px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(230, 0, 0, 0.4);
      margin-bottom: 20px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: left;
    }
    th {
      background-color: #1a1a1a;
      color: #e60000;
      font-weight: bold;
    }
    td {
      color: #000;
    }
    .low-stock {
      background-color: rgba(255, 230, 230, 0.8);
    }
    .low-length {
      background-color: rgba(255, 255, 153, 0.8);
    }
    button {
      padding: 8px 16px;
      margin: 5px;
      background-color: #e60000;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.1s;
      font-size: 14px;
    }
    button:hover {
      background-color: #b30000;
      transform: scale(1.05);
    }
    button:active {
      transform: scale(0.95);
    }
    input, select {
      margin: 5px;
      padding: 8px;
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid #ccc;
      border-radius: 4px;
      color: #000;
      font-size: 14px;
      width: calc(100% - 28px);
    }
    select {
      width: calc(100% - 20px);
    }
    #customType, #customSize {
      display: none;
    }
    .form-section, .filter-section {
      background: rgba(0, 0, 0, 0.7);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      border: 1px solid #e60000;
    }
    label {
      color: #fff;
      margin-right: 10px;
      font-weight: bold;
    }
    .deduct-input {
      width: 60px;
      display: inline-block;
      margin-right: 10px;
    }
    .form-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }
    .form-row > * {
      flex: 1;
      min-width: 150px;
    }
    .quick-deduct {
      padding: 6px 12px;
      font-size: 12px;
    }
    @media (max-width: 600px) {
      body {
        padding: 10px;
      }
      .form-row > * {
        min-width: 100%;
      }
      table {
        font-size: 12px;
      }
      th, td {
        padding: 8px;
      }
      button, input, select {
        font-size: 12px;
      }
      .deduct-input {
        width: 50px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>WrapTrack Inventory</h1>
    
    <!-- Form to add material -->
    <div class="form-section">
      <h3>Add Material</h3>
      <div class="form-row">
        <div>
          <label for="type">Type:</label>
          <select id="type" onchange="toggleCustomType()">
            <option value="">Select Material</option>
            <optgroup label="3M">
              <option value="3M™ Print Wrap Film IJ280">3M™ Print Wrap Film IJ280</option>
              <option value="3M™ Wrap Film 1080">3M™ Wrap Film 1080</option>
              <option value="3M™ Controltac™ Graphic Film IJ180mC">3M™ Controltac™ Graphic Film IJ180mC</option>
              <option value="3M™ Envision™ Print Wrap Film SV480mC">3M™ Envision™ Print Wrap Film SV480mC</option>
              <option value="3M™ Envision™ Print Wrap Film LX480mC">3M™ Envision™ Print Wrap Film LX480mC</option>
              <option value="3M™ Scotchlite™ Print Wrap Film 780mC-10R">3M™ Scotchlite™ Print Wrap Film 780mC-10R</option>
              <option value="3M™ Controltac™ Print Film 40C">3M™ Controltac™ Print Film 40C</option>
              <option value="3M™ Gloss Wrap Overlaminate 8428G">3M™ Gloss Wrap Overlaminate 8428G</option>
              <option value="3M™ Envision™ Gloss Overlaminate 8548G">3M™ Envision™ Gloss Overlaminate 8548G</option>
              <option value="3M™ Matte Overlaminate 8550M">3M™ Matte Overlaminate 8550M</option>
              <option value="3M™ Overlaminate 8900">3M™ Overlaminate 8900</option>
              <option value="3M™ Envision™ Luster Overlaminate 8048G">3M™ Envision™ Luster Overlaminate 8048G</option>
              <option value="3M™ Décor Overlaminate 8600 Series">3M™ Décor Overlaminate 8600 Series</option>
            </optgroup>
            <optgroup label="Avery Dennison">
              <option value="Avery Dennison® MPI 1105 Easy Apply™ RS">Avery Dennison® MPI 1105 Easy Apply™ RS</option>
              <option value="Avery Dennison® SW900 Supreme Wrapping Film">Avery Dennison® SW900 Supreme Wrapping Film</option>
              <option value="Avery Dennison® Conform Chrome">Avery Dennison® Conform Chrome</option>
              <option value="Avery Dennison® MPI 1405 Easy Apply™ RS">Avery Dennison® MPI 1405 Easy Apply™ RS</option>
              <option value="Avery Dennison® MPI 2904 Easy Apply™">Avery Dennison® MPI 2904 Easy Apply™</option>
              <option value="Avery Dennison® MPI 1105 Supercast">Avery Dennison® MPI 1105 Supercast</option>
              <option value="Avery Dennison® MPI 2105 Easy Apply™">Avery Dennison® MPI 2105 Easy Apply™</option>
              <option value="Avery Dennison® MPI 1005 Easy Apply™ RS">Avery Dennison® MPI 1005 Easy Apply™ RS</option>
              <option value="Avery Dennison® DOL 1360Z Gloss">Avery Dennison® DOL 1360Z Gloss</option>
              <option value="Avery Dennison® DOL 1380Z Matte">Avery Dennison® DOL 1380Z Matte</option>
              <option value="Avery Dennison® DOL 1370Z Luster">Avery Dennison® DOL 1370Z Luster</option>
              <option value="Avery Dennison® DOL Max Gloss">Avery Dennison® DOL Max Gloss</option>
              <option value="Avery Dennison® DOL 4000 Ultra-Clear">Avery Dennison® DOL 4000 Ultra-Clear</option>
              <option value="Avery Dennison® DOL 6040 Sparkle">Avery Dennison® DOL 6040 Sparkle</option>
              <option value="Avery Dennison® SL 6560 PVC-Free">Avery Dennison® SL 6560 PVC-Free</option>
            </optgroup>
            <optgroup label="Substance Inc.">
              <option value="Ultracurve X1 Wrap">Ultracurve X1 Wrap</option>
              <option value="Ultracurve X2 Wrap">Ultracurve X2 Wrap</option>
              <option value="Ultracurve 660LSE Wrap">Ultracurve 660LSE Wrap</option>
              <option value="ICON PM-2755 Print">ICON PM-2755 Print</option>
              <option value="Ultracurve 660LSE Print">Ultracurve 660LSE Print</option>
              <option value="Ultracurve X1 Print">Ultracurve X1 Print</option>
              <option value="Ultracurve X2 Print">Ultracurve X2 Print</option>
              <option value="ICON PL-3150 Overlaminate">ICON PL-3150 Overlaminate</option>
              <option value="Ultracurve 1000 Overlaminate">Ultracurve 1000 Overlaminate</option>
              <option value="Ultracurve H1 Overlaminate">Ultracurve H1 Overlaminate</option>
              <option value="Ultracurve 1500S Overlaminate">Ultracurve 1500S Overlaminate</option>
              <option value="Ultracurve Metal-Flake Overlaminate">Ultracurve Metal-Flake Overlaminate</option>
              <option value="Ultracurve 8.0mil Conformable Overlaminate">Ultracurve 8.0mil Conformable Overlaminate</option>
              <option value="Ultracurve 10.0mil Powersport Overlaminate">Ultracurve 10.0mil Powersport Overlaminate</option>
            </optgroup>
            <option value="Custom">Custom</option>
          </select>
        </div>
        <input id="customType" placeholder="Enter Custom Type">
        <input id="color" placeholder="Color" required>
        <div>
          <label for="size">Size:</label>
          <select id="size" onchange="toggleCustomSize()">
            <option value="">Select Size</option>
            <option value="54in x 150ft">54in x 150ft</option>
            <option value="60in x 150ft">60in x 150ft</option>
            <option value="Custom">Custom</option>
          </select>
        </div>
        <input id="customSize" placeholder="Enter Custom Size (e.g., 48in x 100ft)">
        <input id="quantity" type="number" placeholder="Quantity (rolls)" required>
        <input id="remainingLength" type="number" placeholder="Remaining Length (ft)" value="150" required>
        <input id="price" type="number" step="0.01" placeholder="Price per roll ($)" required>
        <input id="supplier" placeholder="Supplier (optional)">
        <button onclick="addMaterial()">Add Material</button>
      </div>
    </div>
    
    <!-- Filter section -->
    <div class="filter-section">
      <div class="form-row">
        <div>
          <label for="brandFilter">Filter by Brand:</label>
          <select id="brandFilter" onchange="applyFilters()">
            <option value="All">All</option>
            <option value="3M">3M</option>
            <option value="Avery Dennison">Avery Dennison</option>
            <option value="Substance Inc.">Substance Inc.</option>
            <option value="Custom">Custom</option>
          </select>
        </div>
        <div>
          <label for="categoryFilter">Filter by Category:</label>
          <select id="categoryFilter" onchange="applyFilters()">
            <option value="All">All</option>
            <option value="Wrap">Wrap</option>
            <option value="Print">Print</option>
            <option value="Overlaminate">Overlaminate</option>
          </select>
        </div>
        <button onclick="exportToCSV()">Export to CSV</button>
      </div>
    </div>
    
    <!-- Inventory table -->
    <h3>Inventory List</h3>
    <table id="inventoryTable">
      <thead>
        <tr>
          <th>Type</th>
          <th>Color</th>
          <th>Size</th>
          <th>Quantity (rolls)</th>
          <th>Remaining Length (ft)</th>
          <th>Price ($/roll)</th>
          <th>Supplier</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="inventoryBody"></tbody>
    </table>
  </div>

  <script>
    // Load inventory from local storage
    let inventory = JSON.parse(localStorage.getItem('inventory')) || [];

    // Material prices (USD per roll, approximate)
    const materialPrices = {
      '3M™ Print Wrap Film IJ280': 450.00,
      '3M™ Wrap Film 1080': 400.00,
      '3M™ Controltac™ Graphic Film IJ180mC': 420.00,
      '3M™ Envision™ Print Wrap Film SV480mC': 460.00,
      '3M™ Envision™ Print Wrap Film LX480mC': 460.00,
      '3M™ Scotchlite™ Print Wrap Film 780mC-10R': 500.00,
      '3M™ Controltac™ Print Film 40C': 380.00,
      '3M™ Gloss Wrap Overlaminate 8428G': 200.00,
      '3M™ Envision™ Gloss Overlaminate 8548G': 210.00,
      '3M™ Matte Overlaminate 8550M': 200.00,
      '3M™ Overlaminate 8900': 190.00,
      '3M™ Envision™ Luster Overlaminate 8048G': 205.00,
      '3M™ Décor Overlaminate 8600 Series': 220.00,
      'Avery Dennison® MPI 1105 Easy Apply™ RS': 430.00,
      'Avery Dennison® SW900 Supreme Wrapping Film': 410.00,
      'Avery Dennison® Conform Chrome': 600.00,
      'Avery Dennison® MPI 1405 Easy Apply™ RS': 420.00,
      'Avery Dennison® MPI 2904 Easy Apply™': 390.00,
      'Avery Dennison® MPI 1105 Supercast': 440.00,
      'Avery Dennison® MPI 2105 Easy Apply™': 400.00,
      'Avery Dennison® MPI 1005 Easy Apply™ RS': 430.00,
      'Avery Dennison® DOL 1360Z Gloss': 180.00,
      'Avery Dennison® DOL 1380Z Matte': 180.00,
      'Avery Dennison® DOL 1370Z Luster': 185.00,
      'Avery Dennison® DOL Max Gloss': 190.00,
      'Avery Dennison® DOL 4000 Ultra-Clear': 200.00,
      'Avery Dennison® DOL 6040 Sparkle': 220.00,
      'Avery Dennison® SL 6560 PVC-Free': 210.00,
      'Ultracurve X1 Wrap': 500.00,
      'Ultracurve X2 Wrap': 520.00,
      'Ultracurve 660LSE Wrap': 480.00,
      'ICON PM-2755 Print': 450.00,
      'Ultracurve 660LSE Print': 460.00,
      'Ultracurve X1 Print': 470.00,
      'Ultracurve X2 Print': 480.00,
      'ICON PL-3150 Overlaminate': 200.00,
      'Ultracurve 1000 Overlaminate': 190.00,
      'Ultracurve H1 Overlaminate': 195.00,
      'Ultracurve 1500S Overlaminate': 200.00,
      'Ultracurve Metal-Flake Overlaminate': 230.00,
      'Ultracurve 8.0mil Conformable Overlaminate': 210.00,
      'Ultracurve 10.0mil Powersport Overlaminate': 220.00
    };

    // Categorize materials
    const categories = {
      '3M™ Print Wrap Film IJ280': 'Wrap',
      '3M™ Wrap Film 1080': 'Wrap',
      '3M™ Controltac™ Graphic Film IJ180mC': 'Wrap',
      '3M™ Envision™ Print Wrap Film SV480mC': 'Print',
      '3M™ Envision™ Print Wrap Film LX480mC': 'Print',
      '3M™ Scotchlite™ Print Wrap Film 780mC-10R': 'Print',
      '3M™ Controltac™ Print Film 40C': 'Print',
      '3M™ Gloss Wrap Overlaminate 8428G': 'Overlaminate',
      '3M™ Envision™ Gloss Overlaminate 8548G': 'Overlaminate',
      '3M™ Matte Overlaminate 8550M': 'Overlaminate',
      '3M™ Overlaminate 8900': 'Overlaminate',
      '3M™ Envision™ Luster Overlaminate 8048G': 'Overlaminate',
      '3M™ Décor Overlaminate 8600 Series': 'Overlaminate',
      'Avery Dennison® MPI 1105 Easy Apply™ RS': 'Wrap',
      'Avery Dennison® SW900 Supreme Wrapping Film': 'Wrap',
      'Avery Dennison® Conform Chrome': 'Wrap',
      'Avery Dennison® MPI 1405 Easy Apply™ RS': 'Wrap',
      'Avery Dennison® MPI 2904 Easy Apply™': 'Print',
      'Avery Dennison® MPI 1105 Supercast': 'Print',
      'Avery Dennison® MPI 2105 Easy Apply™': 'Print',
      'Avery Dennison® MPI 1005 Easy Apply™ RS': 'Print',
      'Avery Dennison® DOL 1360Z Gloss': 'Overlaminate',
      'Avery Dennison® DOL 1380Z Matte': 'Overlaminate',
      'Avery Dennison® DOL 1370Z Luster': 'Overlaminate',
      'Avery Dennison® DOL Max Gloss': 'Overlaminate',
      'Avery Dennison® DOL 4000 Ultra-Clear': 'Overlaminate',
      'Avery Dennison® DOL 6040 Sparkle': 'Overlaminate',
      'Avery Dennison® SL 6560 PVC-Free': 'Overlaminate',
      'Ultracurve X1 Wrap': 'Wrap',
      'Ultracurve X2 Wrap': 'Wrap',
      'Ultracurve 660LSE Wrap': 'Wrap',
      'ICON PM-2755 Print': 'Print',
      'Ultracurve 660LSE Print': 'Print',
      'Ultracurve X1 Print': 'Print',
      'Ultracurve X2 Print': 'Print',
      'ICON PL-3150 Overlaminate': 'Overlaminate',
      'Ultracurve 1000 Overlaminate': 'Overlaminate',
      'Ultracurve H1 Overlaminate': 'Overlaminate',
      'Ultracurve 1500S Overlaminate': 'Overlaminate',
      'Ultracurve Metal-Flake Overlaminate': 'Overlaminate',
      'Ultracurve 8.0mil Conformable Overlaminate': 'Overlaminate',
      'Ultracurve 10.0mil Powersport Overlaminate': 'Overlaminate'
    };

    // Toggle custom type input
    function toggleCustomType() {
      const typeSelect = document.getElementById('type');
      const customTypeInput = document.getElementById('customType');
      const priceInput = document.getElementById('price');
      customTypeInput.style.display = typeSelect.value === 'Custom' ? 'block' : 'none';
      if (typeSelect.value && typeSelect.value !== 'Custom') {
        priceInput.value = materialPrices[typeSelect.value] || '';
      } else {
        priceInput.value = '';
      }
    }

    // Toggle custom size input
    function toggleCustomSize() {
      const sizeSelect = document.getElementById('size');
      const customSizeInput = document.getElementById('customSize');
      customSizeInput.style.display = sizeSelect.value === 'Custom' ? 'block' : 'none';
    }

    // Render inventory table
    function renderInventory(filteredInventory) {
      const tbody = document.getElementById('inventoryBody');
      tbody.innerHTML = '';
      filteredInventory.forEach((item, index) => {
        const row = document.createElement('tr');
        if (item.quantity < 5) row.classList.add('low-stock');
        if (item.remainingLength < 10) row.classList.add('low-length');
        row.innerHTML = `
          <td>${item.type}</td>
          <td>${item.color}</td>
          <td>${item.size}</td>
          <td>${item.quantity}</td>
          <td>
            ${item.remainingLength}
            <button class="quick-deduct" onclick="deductMaterial(${index}, 5)">-5</button>
            <button class="quick-deduct" onclick="deductMaterial(${index}, 10)">-10</button>
            <input type="number" class="deduct-input" id="deduct-${index}" placeholder="Use ft">
            <button onclick="deductMaterial(${index})">Deduct</button>
          </td>
          <td>$${item.price.toFixed(2)}</td>
          <td>${item.supplier || '-'}</td>
          <td><button onclick="deleteMaterial(${index})">Delete</button></td>
        `;
        tbody.appendChild(row);
      });
    }

    // Apply filters
    function applyFilters() {
      const brandFilter = document.getElementById('brandFilter').value;
      const categoryFilter = document.getElementById('categoryFilter').value;
      let filteredInventory = [...inventory];

      if (brandFilter !== 'All') {
        filteredInventory = filteredInventory.filter(item => {
          if (brandFilter === 'Custom') return !item.type.includes('3M') && !item.type.includes('Avery Dennison') && !item.type.includes('Substance Inc.');
          return item.type.includes(brandFilter);
        });
      }

      if (categoryFilter !== 'All') {
        filteredInventory = filteredInventory.filter(item => {
          const category = item.type in categories ? categories[item.type] : 'Custom';
          return category === categoryFilter;
        });
      }

      renderInventory(filteredInventory);
    }

    // Add material
    function addMaterial() {
      const typeSelect = document.getElementById('type').value;
      const customType = document.getElementById('customType').value;
      const sizeSelect = document.getElementById('size').value;
      const customSize = document.getElementById('customSize').value;
      const material = {
        type: typeSelect === 'Custom' ? customType : typeSelect,
        color: document.getElementById('color').value,
        size: sizeSelect === 'Custom' ? customSize : sizeSelect,
        quantity: parseInt(document.getElementById('quantity').value),
        remainingLength: parseFloat(document.getElementById('remainingLength').value),
        price: parseFloat(document.getElementById('price').value),
        supplier: document.getElementById('supplier').value
      };
      if (!material.type || !material.color || !material.size || isNaN(material.quantity) || isNaN(material.remainingLength) || isNaN(material.price)) {
        alert('Please fill all required fields.');
        return;
      }
      inventory.push(material);
      localStorage.setItem('inventory', JSON.stringify(inventory));
      applyFilters();
      clearForm();
    }

    // Deduct material
    function deductMaterial(index, presetAmount = null) {
      const deductAmount = presetAmount !== null ? presetAmount : parseFloat(document.getElementById(`deduct-${index}`).value);
      if (isNaN(deductAmount) || deductAmount <= 0) {
        alert('Enter a valid amount to deduct.');
        return;
      }
      if (inventory[index].remainingLength < deductAmount) {
        alert('Cannot deduct more than remaining length.');
        return;
      }
      inventory[index].remainingLength -= deductAmount;
      if (inventory[index].remainingLength <= 0 && inventory[index].quantity > 0) {
        inventory[index].quantity -= 1;
        if (inventory[index].quantity === 0) {
          inventory.splice(index, 1);
        } else {
          inventory[index].remainingLength = 150;
        }
      }
      localStorage.setItem('inventory', JSON.stringify(inventory));
      applyFilters();
    }

    // Delete material
    function deleteMaterial(index) {
      if (confirm('Are you sure you want to delete this material?')) {
        inventory.splice(index, 1);
        localStorage.setItem('inventory', JSON.stringify(inventory));
        applyFilters();
      }
    }

    // Export to CSV
    function exportToCSV() {
      const csv = ['Type,Color,Size,Quantity,Remaining Length (ft),Price ($/roll),Supplier'];
      inventory.forEach(item => {
        csv.push(`"${item.type.replace(/"/g, '""')}","${item.color.replace(/"/g, '""')}","${item.size.replace(/"/g, '""')}","${item.quantity}","${item.remainingLength}","${item.price.toFixed(2)}","${item.supplier ? item.supplier.replace(/"/g, '""') : '-'}"`);
      });
      const blob = new Blob([csv.join('\n')], { type: 'text/csv' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'wraptrack_inventory.csv';
      a.click();
      window.URL.revokeObjectURL(url);
    }

    // Clear form
    function clearForm() {
      document.getElementById('type').value = '';
      document.getElementById('customType').value = '';
      document.getElementById('customType').style.display = 'none';
      document.getElementById('color').value = '';
      document.getElementById('size').value = '';
      document.getElementById('customSize').value = '';
      document.getElementById('customSize').style.display = 'none';
      document.getElementById('quantity').value = '';
      document.getElementById('remainingLength').value = '150';
      document.getElementById('price').value = '';
      document.getElementById('supplier').value = '';
    }

    // Initial render
    applyFilters();
  </script>
</body>
</html>